<?xml version="1.0" encoding="UTF-8" ?>

<beans xmlns="http://www.springframework.org/schema/beans"
	   xsi:schemaLocation="http://www.springframework.org/schema/beans 
	   http://www.springframework.org/schema/beans/spring-beans-2.0.xsd" 
	   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
	   
	<bean id="Engine" class="es.upm.dit.gsi.semantic.similarity.Engine">
		<property name="similarityService" ref="similarityService"/>
		<property name="repositoryService" ref="repositoryService"/>
	</bean>
	   
	<bean id="repositoryService" class="es.upm.dit.gsi.semantic.similarity.RepositoryService">
		<property name="queryGraph" ref="query"/>
		<property name="resourceGraph" ref="resource"/>
	</bean>
	   
	<bean id="similarityService" class="es.upm.dit.gsi.semantic.similarity.SimilarityService">
		<property name="similarityList">
			<list>
				<ref bean="jobDetails"/>
				<ref bean="skills"/>
			</list>
		</property>
	</bean>
	
	<bean id="query" class="es.upm.dit.gsi.semantic.similarity.Graph">
		<property name="modelFile" value="dataset/jpp.rdf" />
		<property name="constructQuery" value="dataset/query/constructQuery.sparql" />
		<property name="resourceQuery" value="dataset/query/queryList.sparql" />
		<property name="resourceName" value="jpp"/>
	</bean>
	
	<bean id="resource" class="es.upm.dit.gsi.semantic.similarity.Graph">
		<property name="modelFile" value="dataset/jps.rdf" />
		<property name="constructQuery" value="dataset/query/constructResource.sparql" />
		<property name="resourceQuery" value="dataset/query/resourceList.sparql" />
		<property name="resourceName" value="jps"/>
	</bean>
	
	<bean id="jobDetails" class="es.upm.dit.gsi.semantic.similarity.measure.ClusterSimilarity">
		<property name="weight" value="0.25" />
		<property name="label" value="Job Details" />
		<property name="similarityList">
			<list>
				<ref bean="travelRequire"/>
				<ref bean="salaryRequire"/>
			</list>
		</property>
	</bean>
	
	<bean id="travelRequire" class="es.upm.dit.gsi.semantic.similarity.measure.SinglePropertySimilarity">
		<property name="weight" value="0.3"/>
		<property name="label" value="travel"/>
		<property name="queryPropertyURI" value="http://example.org/JobPositionPosting.rdfs#travelRequired" />
		<property name="resourcePropertyURI" value="http://example.org/JobPositionSeeker.rdfs#travelDesired" />
		<property name="similarityCompute" ref="stringSim" />
	</bean>
	
	<bean id="salaryRequire" class="es.upm.dit.gsi.semantic.similarity.measure.SinglePropertySimilarity">
		<property name="weight" value="0.7"/>
		<property name="label" value="salary"/>
		<property name="queryPropertyURI" value="http://example.org/JobPositionPosting.rdfs#hasSalaryBase" />
		<property name="resourcePropertyURI" value="http://example.org/JobPositionSeeker.rdfs#desiredSalaryBase" />
		<property name="similarityCompute" ref="numericSim" />
	</bean>
	
	<bean id="skills" class="es.upm.dit.gsi.semantic.similarity.measure.HybridPropertySimilarity">
		<property name="weight" value="0.75"/>
		<property name="label" value="skills"/>
		<property name="queryPropertyURI" value="http://example.org/JobPositionPosting.rdfs#requiredCompetence" />
		<property name="resourcePropertyURI" value="http://example.org/JobPositionSeeker.rdfs#hasSkill" />
		<property name="similarityCompute" ref="conceptualSim" />
	</bean>
	
	<bean id="conceptualSim" class="es.upm.dit.gsi.semantic.similarity.compute.ConceptualSimilarityCompute">
		<property name="queryConcept" value="http://www.w3.org/1999/02/22-rdf-syntax-ns#type"/>
		<property name="resourceConcept" value="http://www.w3.org/1999/02/22-rdf-syntax-ns#type"/>
		<property name="queryConceptProperty" value="http://example.org/it-skills.rdfs#competenceLevel"/>
		<property name="resourceConceptProperty" value="http://example.org/it-skills.rdfs#competenceLevel"/>
		<property name="conceptSimilarity" ref="stringSim"/>
		<property name="conceptPropertySimilarity" ref="stringSim"/>
	</bean>
	
	<bean id="stringSim" class="es.upm.dit.gsi.semantic.similarity.compute.StringSimilarityCompute">
		<property name="caseSensitive" value="false"/>
	</bean>
	
	<bean id="numericSim" class="es.upm.dit.gsi.semantic.similarity.compute.NumericSimilarityCompute">
		<property name="deviation" value="0.5"/>
		<property name="downward" value="true"/>
	</bean>
	
</beans>